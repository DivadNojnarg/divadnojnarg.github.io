<!DOCTYPE html>
<html lang="en-us">
    <head>
        
        
        <title>
            
            
                Setting MathJax with Hugo | Hi, I am David
            
        </title>

        <meta name="title" content="Setting MathJax with Hugo | Hi, I am David">

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="referrer" content="no-referrer-when-downgrade">
        <meta name="generator" content="">
        <base href="../../">
        <meta name="description" content="PhD in Mathematical Physiology, Renal Physiology, Zurich.">
        
        <meta name="author" content="David Granjon">
        
        <meta property="og:title" content="Setting MathJax with Hugo | Hi, I am David">
        <meta property="og:type" content="website">
        <meta property="og:url" content="/">
        
        <meta property="og:description" content="PhD in Mathematical Physiology, Renal Physiology, Zurich.">
        

        

        <link rel="canonical" href="../../blog/mathjax/">
        
        <link rel="stylesheet" href="styles/main.css" type="text/css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/dracula.min.css">
        
        
        <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>
        
    </head>

    <body>
        

        

        <nav class="row middle-xs center-xs">
            <div class="col-xs-6 col-sm-1 logo">
                <a href="../../"><img src="../../images/fractal-logo.png" alt="Hi, I am David"></a>
            </div>
            
            <div class="col-xs-3 col-md-2"><h3><a href="../../#work">Work</a></h3></div>
            
            <div class="col-xs-3 col-md-2"><h3><a href="../../#blog">Blog</a></h3></div>
            
            <div class="col-xs-3 col-md-2"><h3><a href="../../#contact">Contact</a></h3></div>
            
            <div class="col-xs-3 col-md-2"><h3><a href="../../cv.pdf">About</a></h3></div>
            
            <div class="col-xs-6 col-sm-1 nav-toggle">
                <a href="" class="nav-icon" onclick="return false"><img src="../../images/icon-menu.png" alt="Open Menu"><img src="../../images/icon-x.png" alt="Close Menu" style="display: none;"></a>
            </div>
        </nav>
        <section class="nav-full row middle-xs center-xs">
            <div class="col-xs-12">
                <div class="row middle-xs center-xs">
                    
                    <div class="col-xs-12"><h1><a href="../../#work">Work</a></h1></div>
                    
                    <div class="col-xs-12"><h1><a href="../../#blog">Blog</a></h1></div>
                    
                    <div class="col-xs-12"><h1><a href="../../#contact">Contact</a></h1></div>
                    
                    <div class="col-xs-12"><h1><a href="../../cv.pdf">About</a></h1></div>
                    
                </div>
            </div>
        </section>
        <main>


<section class="container">
    <section class="content">
      <h1> Setting MathJax with Hugo </h1>

      <div class="sub-header">
        May 2017 Â· 4 minute read
      </div>

      <div class="entry-content">
        

<h2 id="the-classical-approach">The classical approach</h2>

<p><a href="https://www.mathjax.org">MathJax</a> is a javascript library which allows the user to integrate math expressions in a website or a blog. However, its <a href="http://docs.mathjax.org/en/latest/configuration.html">configuration</a> can be quite complex for beginners. In my previous website powered by Jekyll, I easily managed to install MathJax, whereas I encountered some problems with Hugo.</p>

<h3 id="1-installing-mathjax-via-hugo-s-documentation">1. Installing MathJax via Hugo&rsquo;s documentation</h3>

<p>Everything you need can be found <a href="https://gohugo.io/tutorials/mathjax/">here</a>. You have to insert the code below in the <em>/layout/partials</em> folder of your website: it is even better to create a file named <strong>mathjax_support.html</strong>, for example.</p>

<pre><code class="language-javascript">&lt;script type=&quot;text/javascript&quot;
  src=&quot;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;
&lt;/script&gt;

&lt;script type=&quot;text/x-mathjax-config&quot;&gt;
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: &quot;AMS&quot; },
         extensions: [&quot;AMSmath.js&quot;, &quot;AMSsymbols.js&quot;] }
  }
});
&lt;/script&gt;

&lt;script type=&quot;text/x-mathjax-config&quot;&gt;
  MathJax.Hub.Queue(function() {
    // Fix &lt;code&gt; tags after MathJax finishes running. This is a
    // hack to overcome a shortcoming of Markdown. Discussion at
    // https://github.com/mojombo/jekyll/issues/199
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i &lt; all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
&lt;/script&gt;
</code></pre>

<p>Then, you will have to include <strong>mathjax_support.html</strong> in <strong>footer.html</strong> or <strong>header.html</strong>. In my case, I chose to put it in <strong>header.html</strong> just before the closing <code>&lt;/head&gt;</code> as follows:</p>

<pre><code>{{ partial &quot;mathjax_support.html&quot; . }}
</code></pre>

<p>If you are as lucky as me, it should not work at all :).</p>

<h3 id="2-a-second-method">2. A second method</h3>

<p>I found a <a href="https://discuss.gohugo.io/t/solved-mathjax-stopped-working/5946">solution</a> after some google research and I warmly thanks its author! The idea is to slightly modify the previous code by including everything in the same <code>&lt;script&gt;</code> and adding <em>async</em>:</p>

<pre><code class="language-javascript">&lt;script type=&quot;text/javascript&quot; async
  src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: &quot;AMS&quot; },
         extensions: [&quot;AMSmath.js&quot;, &quot;AMSsymbols.js&quot;] }
  }
  });
  MathJax.Hub.Queue(function() {
    // Fix &lt;code&gt; tags after MathJax finishes running. This is a
    // hack to overcome a shortcoming of Markdown. Discussion at
    // https://github.com/mojombo/jekyll/issues/199
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i &lt; all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  // Autonumbering by mathjax
  TeX: { equationNumbers: { autoNumber: &quot;AMS&quot; } }
  });
&lt;/script&gt;
</code></pre>

<p>Now, your <strong>mathjax_support.html</strong> should look like the above code and you should be able to play with latex!</p>

<p><span style="color:red"><strong>According to MathJax, their CDN is being <a href="https://www.mathjax.org/cdn-shutting-down/">discontinued</a>, but using you are not concerned if you use the previous code.</strong></span></p>

<h2 id="latex-rendering-errors">Latex rendering errors</h2>

<p>There are some differences with classical Latex expressions and the syntax to use in a markdown document. For example, <code>\sum_</code> does not render with Hugo and you should use <code>\sum\_</code> instead (notice the second backslash before the underscore). I noticed that it is the same thing for <code>\int_</code> (so <code>\int\_</code>). Of course, this will tighly depend on the configuration you chose for MathJax. Moreover, the following system of equations does not render properly:</p>

<p>$$
\left{
\begin{align}
\dot{x} &amp; = \sigma(y-x) \newline
\dot{y} &amp; = \rho x - y - xz \newline
\dot{z} &amp; = -\beta z + xy
\end{align}
\right.
$$</p>

<p>What follows is better:</p>

<p>$$
\left\{
\begin{align}
\dot{x} &amp; = \sigma(y-x) \newline
\dot{y} &amp; = \rho x - y - xz \newline
\dot{z} &amp; = -\beta z + xy
\end{align}
\right.
$$</p>

<p>by simply changing <code>\left\{</code> to <code>\left\\{</code>. Yet, <code>{</code> should be displayed in the center and not in the left, a problem that I did not have with Jekyll. Thus, I replaced <code>\begin{align}</code> by <code>\begin{cases}</code>:</p>

<p>$$
\begin{cases}
\dot{x} &amp; = \sigma(y-x) \newline
\dot{y} &amp; = \rho x - y - xz \newline
\dot{z} &amp; = -\beta z + xy
\end{cases}
$$</p>

<p>which works, except that we lost equations numbering.</p>

<h2 id="latex-showcase">Latex Showcase</h2>

<p>$$
\left( \sum_{k=1}^n a_k b_k \right)^{2} \leq
 \left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)
$$</p>

<p>$$
\mathbf{V}_1 \times \mathbf{V}_2 =
   \begin{vmatrix}
    \mathbf{i} &amp; \mathbf{j} &amp; \mathbf{k} \newline
    \frac{\partial X}{\partial u} &amp; \frac{\partial Y}{\partial u} &amp; 0 \newline
    \frac{\partial X}{\partial v} &amp; \frac{\partial Y}{\partial v} &amp; 0 \newline
   \end{vmatrix}
$$</p>

<p>$$
\frac{1}{(\sqrt{\phi \sqrt{5}}-\phi) e^{\frac25 \pi}} =
     1+\frac{e^{-2\pi}} {1+\frac{e^{-4\pi}} {1+\frac{e^{-6\pi}}
      {1+\frac{e^{-8\pi}} {1+\ldots} } } }
$$</p>

<p>$$
1 +  \frac{q^2}{(1-q)}+\frac{q^6}{(1-q)(1-q^2)}+\cdots =
    \prod_{j=0}^{\infty}\frac{1}{(1-q^{5j+2})(1-q^{5j+3})},
     \quad\quad \text{for $|q|&lt;1$}.
$$</p>

<p>$$
\begin{align}
  \nabla \times \vec{\mathbf{B}} -\, \frac1c\, \frac{\partial\vec{\mathbf{E}}}{\partial t} &amp; = \frac{4\pi}{c}\vec{\mathbf{j}} \newline
  \nabla \cdot \vec{\mathbf{E}} &amp; = 4 \pi \rho \newline
  \nabla \times \vec{\mathbf{E}}\, +\, \frac1c\, \frac{\partial\vec{\mathbf{B}}}{\partial t} &amp; = \vec{\mathbf{0}} \newline
  \nabla \cdot \vec{\mathbf{B}} &amp; = 0
\end{align}
$$</p>

<p>$$
\begin{equation}
x(t) = e^{\int_{t_0}^tp(s)ds}\Bigg(\int_{t_0}^t\Big(q(s)e^{-\int_{t_0}^sp(\tau)d\tau}\Big)ds + x_0\Bigg).
\end{equation}
$$</p>

<p>Here is inline math: $\sqrt{3x-1}+(1+x)^2$.</p>

<p><strong>I will update this part as frequently as possible&hellip;</strong></p>

      </div>

      <div class="links">
        
          &laquo; <a class="basic-alignment left" href="../../blog/hello/">Welcome</a>
        
        
      </div>
    </section>
    <div id="disqus_thread"></div>
  <script type="text/javascript">
    
    (function() {
      
      
      if (window.location.hostname == "localhost")
      return;
      
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'divadnojnarg';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

        </main>
        <footer class="row middle-xs center-xs">
            
            <div class="col-xs-3 col-md-2"><a href="https://github.com/divadnojnarg">GitHub</a></div>
            
            
            <div class="col-xs-3 col-md-2"><a href="https://linkedin.com/in/david-granjon-88625968">LinkedIn</a></div>
            
            
            
            <div class="col-xs-12">
                
                Copyright &copy; 2017 Hi, I am David.
                
                
            </div>
            
            
            <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
            
            <script src="../../scripts/main.js" type="text/javascript"></script>
            
            <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
        </footer>
    </body>
</html>

