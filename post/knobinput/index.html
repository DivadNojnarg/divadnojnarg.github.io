<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.59.1" />

  <title>Extend shinyWidgets: knobInput &middot; David Granjon</title>

  <meta name="description" content="" />

  

<meta itemprop="name" content="Extend shinyWidgets: knobInput">
<meta itemprop="description" content="Introduction shiny basic package contains several widgets, available here. This database is continuously extended through the shinyWidget package developed by the dreamRs team.">


<meta itemprop="datePublished" content="2017-11-21T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2017-11-21T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1871">



<meta itemprop="keywords" content="" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Extend shinyWidgets: knobInput"/>
<meta name="twitter:description" content="Introduction shiny basic package contains several widgets, available here. This database is continuously extended through the shinyWidget package developed by the dreamRs team."/>


<meta property="og:title" content="Extend shinyWidgets: knobInput" />
<meta property="og:description" content="Introduction shiny basic package contains several widgets, available here. This database is continuously extended through the shinyWidget package developed by the dreamRs team." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://divadnojnarg.github.io/post/knobinput/" />
<meta property="article:published_time" content="2017-11-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-11-21T00:00:00+00:00" /><meta property="og:site_name" content="David Granjon" />



  <link type="text/css"
        rel="stylesheet"
        href="https://divadnojnarg.github.io/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="https://divadnojnarg.github.io/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="https://divadnojnarg.github.io/css/hyde.css">

  
<style type="text/css">
  .sidebar {
    background-color: #3e3e3e;
  }

  .read-more-link a {
    border-color: #3e3e3e;
  }

  .pagination li a {
    color: #3e3e3e;
    border: 1px solid #3e3e3e;
  }

  .pagination li.active a {
    background-color: #3e3e3e;
  }

  .pagination li a:hover {
    background-color: #3e3e3e;
    opacity: 0.75;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #3e3e3e;
  }
</style>



  <link type="text/css" rel="stylesheet" href="https://divadnojnarg.github.io/css/custom.css">

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <img src="https://divadnojnarg.github.io/images/profile.jpeg" class="img-circle img-headshot center" alt="Profile Picture">
        </div>
        
      

      <h1>David Granjon</h1>

      
      <p class="lead">Blog</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://divadnojnarg.github.io/">Home</a>
        </li>
        <li>
          <a href="/cv.pdf"> CV </a>
        </li><li>
          <a href="/about/"> About </a>
        </li><li>
          <a href="mailto:dgranjon@ymail.com"> Contact </a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://ch.linkedin.com/in/david-granjon-88625968" rel="me" title="Linkedin">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
      
      <a href="https://github.com/DivadNojnarg" rel="me" title="GitHub">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="https://twitter.com/divadnojnarg" rel="me" title="Twitter">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1>Extend shinyWidgets: knobInput</h1>

  <div class="post-date">
    <time datetime="2017-11-21T00:00:00Z">Nov 21, 2017</time> Â· 9 min read
  </div>

  

<h2 id="introduction">Introduction</h2>

<p><a href="https://shiny.rstudio.com">shiny</a> basic package contains several widgets, available
<a href="https://shiny.rstudio.com/gallery/widget-gallery.html">here</a>. This database is
continuously extended through the <a href="https://github.com/dreamRs/shinyWidgets">shinyWidget</a>
package developed by the <a href="https://www.dreamrs.fr">dreamRs</a> team. Here I present how we
add a new knobInput widget to shinyWidget, with Victor Perrier from the dreamRs team.</p>

<p>I always wanted to play with some knobs in shiny, similarly as what we do with sliders.
However, in spite of some research, I found nothing already implemented. Later, I discovered
this js library called <a href="https://github.com/aterrien">jQuery knob</a>. In parallel, I started to read some tutorials
on <em>&ldquo;how to extend shiny&rdquo;</em> and decided to create a new RStudio project to include this
new widget. Since I am not a expert in javascript and jQuery, I asked a <a href="https://stackoverflow.com/questions/47261702/create-a-knobinput-widget-in-shiny-app">question</a>
on stackoverflow and Victor Perrier nicely solved my problem. Then, we both decided to include
this new widget in the shinyWidget package. Below is a short explanation on how to build such a custom input,
which is not trivial but not so hard. I hope it will be useful for you, who are reading this
blog post.</p>

<p>Here is the final result on shinyapps.io: <a href="https://dgranjon.shinyapps.io/knobinput_example/">shinyknob</a></p>

<iframe src="https://dgranjon.shinyapps.io/knobinput_example/" style="width: 700px; height: 700px; border: none; overflow: hidden;"></iframe>

<h2 id="tutorial">Tutorial</h2>

<p>The idea is simple:</p>

<ul>
<li>First, we create the file containing the new widget: <em>input-knob.R</em>,
because it is supposed to be a knob (very original). It is widely inspired
on what you can find on the shiny github R <a href="https://github.com/rstudio/shiny/tree/master/R">folder</a>.
Below, I quickly describe its content:</li>
</ul>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># Knob Input</span>
knobInput <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(inputId, label, value, min <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, max <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>, step <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
                      angleOffset <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, angleArc <span style="color:#f92672">=</span> <span style="color:#ae81ff">360</span>, cursor <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>,
                      thickness <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, lineCap <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;default&#34;</span>, <span style="color:#e6db74">&#34;round&#34;</span>), displayInput <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
                      displayPrevious <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>, rotation <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;clockwise&#34;</span>, <span style="color:#e6db74">&#34;anticlockwise&#34;</span>),
                      fgColor <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, inputColor <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, bgColor <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
                      readOnly <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>, skin <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, width <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, height <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>) {
  value <span style="color:#f92672">&lt;-</span> shiny<span style="color:#f92672">::</span><span style="color:#a6e22e">restoreInput</span>(id <span style="color:#f92672">=</span> inputId, default <span style="color:#f92672">=</span> value)
  lineCap <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">match.arg</span>(lineCap)
  rotation <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">match.arg</span>(rotation)
  knobParams <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">dropNulls</span>(<span style="color:#a6e22e">list</span>(
    id <span style="color:#f92672">=</span> inputId, type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;text&#34;</span>, class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob-input&#34;</span>, 
    value <span style="color:#f92672">=</span> value, `data-value` <span style="color:#f92672">=</span> value, `data-skin` <span style="color:#f92672">=</span> skin,
    `data-min` <span style="color:#f92672">=</span> min, `data-max` <span style="color:#f92672">=</span> max, `data-step` <span style="color:#f92672">=</span> step, 
    `data-angleoffset` <span style="color:#f92672">=</span> angleOffset, `data-anglearc` <span style="color:#f92672">=</span> angleArc,
    `data-displayprevious` <span style="color:#f92672">=</span> displayPrevious, `data-thickness` <span style="color:#f92672">=</span> thickness,
    `data-displayinput` <span style="color:#f92672">=</span> displayInput, `data-linecap` <span style="color:#f92672">=</span> lineCap,
    `data-fgcolor` <span style="color:#f92672">=</span> fgColor, `data-inputcolor` <span style="color:#f92672">=</span> inputColor,
    `data-bgcolor` <span style="color:#f92672">=</span> bgColor, `data-cursor` <span style="color:#f92672">=</span> cursor,
    `data-rotation` <span style="color:#f92672">=</span> rotation, `data-readonly` <span style="color:#f92672">=</span> readOnly,
    `data-width` <span style="color:#f92672">=</span> width, `data-height` <span style="color:#f92672">=</span> height
  ))
  knobParams <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lapply</span>(knobParams, <span style="color:#a6e22e">function</span>(x) {
    <span style="color:#a6e22e">if </span>(<span style="color:#a6e22e">identical</span>(x, <span style="color:#66d9ef">TRUE</span>))
      <span style="color:#e6db74">&#34;true&#34;</span>
    else <span style="color:#a6e22e">if </span>(<span style="color:#a6e22e">identical</span>(x, <span style="color:#66d9ef">FALSE</span>))
      <span style="color:#e6db74">&#34;false&#34;</span>
    else x
  })
  inputTag <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">do.call</span>(htmltools<span style="color:#f92672">::</span>tags<span style="color:#f92672">$</span>input, knobParams)
  knobInputTag <span style="color:#f92672">&lt;-</span> htmltools<span style="color:#f92672">::</span>tags<span style="color:#f92672">$</span><span style="color:#a6e22e">div</span>(
    class <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;form-group shiny-input-container&#34;</span>,
    style <span style="color:#f92672">=</span> <span style="color:#a6e22e">if </span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">is.null</span>(width)) <span style="color:#a6e22e">paste0</span>(<span style="color:#e6db74">&#34;width: &#34;</span>, htmltools<span style="color:#f92672">::</span><span style="color:#a6e22e">validateCssUnit</span>(width), <span style="color:#e6db74">&#34;;&#34;</span>),
    <span style="color:#a6e22e">if </span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">is.null</span>(label)) htmltools<span style="color:#f92672">::</span>tags<span style="color:#f92672">$</span><span style="color:#a6e22e">label</span>(`for` <span style="color:#f92672">=</span> inputId, label),
    <span style="color:#a6e22e">if </span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">is.null</span>(label)) htmltools<span style="color:#f92672">::</span>tags<span style="color:#f92672">$</span><span style="color:#a6e22e">br</span>(),
    inputTag
  )
  dep <span style="color:#f92672">&lt;-</span> htmltools<span style="color:#f92672">::</span><span style="color:#a6e22e">htmlDependency</span>(
    name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;jquery-knob&#34;</span>, version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1.2.13&#34;</span>,
    src <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(href <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;jquery-knob&#34;</span>),
    script <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;jquery.knob.min.js&#34;</span>,
               <span style="color:#e6db74">&#34;knob-input-binding.js&#34;</span>)
  )
  htmltools<span style="color:#f92672">::</span><span style="color:#a6e22e">attachDependencies</span>(knobInputTag, dep)
  
  <span style="color:#75715e"># Change the value of a knob input on the client</span>
  updateKnobInput <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(session, inputId, label <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, value <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, readOnly <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>) {
    message <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">dropNulls</span>(<span style="color:#a6e22e">list</span>(label <span style="color:#f92672">=</span> label, value <span style="color:#f92672">=</span> value, readOnly <span style="color:#f92672">=</span> readOnly))
    session<span style="color:#f92672">$</span><span style="color:#a6e22e">sendInputMessage</span>(inputId, message)
  }
  
  dropNulls <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(x) {
    x[<span style="color:#f92672">!</span><span style="color:#a6e22e">vapply</span>(x, is.null, FUN.VALUE <span style="color:#f92672">=</span> <span style="color:#a6e22e">logical</span>(<span style="color:#ae81ff">1</span>))]
}</code></pre></div>

<p>First of all, all the options available in jQuery knob are included in the function
arguments. Thus, I highly recommend you to check the corresponding documentation.
The value is recovered using shiny&rsquo;s <strong>restoreInput</strong> function. linecap and rotation
can have 2 different values. Therefore, the <strong>match.arg</strong> function allows to select the values.
All parameters passed in the function are stored in a list called knobParams. Importantly,
as shown in jQuery knob demo page, type is set as &ldquo;text&rdquo;. We choose to name the class &ldquo;knob-input&rdquo;,
instead of &ldquo;dial&rdquo; (see the <a href="http://anthonyterrien.com/knob/">documentation</a>), without any consequences.
Null values are not considered (<strong>dropNulls</strong> function). Since we use a js library, TRUE and FALSE
cannot be recognized, unless they are converted in true and false, respectively.
This is done, using the <strong>lapply</strong> and <strong>identical</strong> functions. Our knobParam widget is wrapped in an input div (<code>tags$input</code>),
as also shown in jQuery knob documentation:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dial&#34;</span> <span style="color:#a6e22e">data-min</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;-50&#34;</span> <span style="color:#a6e22e">data-max</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;50&#34;</span>&gt;</code></pre></div>

<p>We store all dependencies in the dep object, via
<strong>htmlDependency</strong> function from htmltools package. Notice that in the shinyWidget
<a href="https://github.com/dreamRs/shinyWidgets/blob/master/R/input-knob.R">code</a>, this part is
slightly modified, since files are organized in another way. We also create an <strong>updateKnobInput</strong> function,
which will allow the user to update the value and label of the knob (readOnly does not
work at the moment). <strong>dropNulls</strong> is defined below but could be written in a utils.R file, for instance.</p>

<p>Additionally, your /www folder should contain both <em>jquery.knob.min.js</em> and <em>knob-input-binding.js</em>,
the later is discussed below.</p>

<ul>
<li>We create the related input-binding. This file should be put in the
/www folder of the widget. To summarise, the input-binding will make the link between
shiny and your new widget (see <a href="https://shiny.rstudio.com/articles/building-inputs.html">here</a>).</li>
</ul>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">exportsKnob</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">Shiny</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">Shiny</span> <span style="color:#f92672">||</span> {};
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">$escapeKnob</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">exportsKnob</span>.<span style="color:#a6e22e">$escape</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">val</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">val</span>.<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">/([!&#34;#$%&amp;&#39;()*+,.\/:;&lt;=&gt;?@\[\\\]^`{|}~])/g</span>, <span style="color:#e6db74">&#39;\\$1&#39;</span>);
};



<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">tron_skin</span>() {

    <span style="color:#75715e">// &#34;tron&#34; case
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">data</span>(<span style="color:#e6db74">&#39;skin&#39;</span>) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;tron&#39;</span>) {
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cursorExt</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>;
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">arc</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">cv</span>) <span style="color:#75715e">// Arc
</span><span style="color:#75715e"></span>            ,
            <span style="color:#a6e22e">pa</span> <span style="color:#75715e">// Previous arc
</span><span style="color:#75715e"></span>            , <span style="color:#a6e22e">r</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">lineWidth</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lineWidth</span>;
        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">displayPrevious</span>) {
            <span style="color:#a6e22e">pa</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">arc</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">v</span>);
            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">beginPath</span>();
            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">strokeStyle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">pColor</span>;
            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">arc</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xy</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xy</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">radius</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lineWidth</span>, <span style="color:#a6e22e">pa</span>.<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">pa</span>.<span style="color:#a6e22e">e</span>, <span style="color:#a6e22e">pa</span>.<span style="color:#a6e22e">d</span>);
            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">stroke</span>();
        }
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">beginPath</span>();
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">strokeStyle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">r</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">fgColor</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">fgColor</span>;
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">arc</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xy</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xy</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">radius</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lineWidth</span>, <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">e</span>, <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">d</span>);
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">stroke</span>();
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">lineWidth</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">beginPath</span>();
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">strokeStyle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">fgColor</span>;
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">arc</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xy</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xy</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">radius</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lineWidth</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lineWidth</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">PI</span>, <span style="color:#66d9ef">false</span>);
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">stroke</span>();
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
    }
}


<span style="color:#75715e">// Knob input binding
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">knobInputBinding</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Shiny</span>.<span style="color:#a6e22e">InputBinding</span>();


<span style="color:#75715e">// An input binding must implement these methods
</span><span style="color:#75715e"></span><span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">extend</span>(<span style="color:#a6e22e">knobInputBinding</span>, {

    <span style="color:#75715e">// This returns a jQuery object with the DOM element
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">find</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">scope</span>) {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">scope</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;.knob-input&#39;</span>);
    },

    <span style="color:#75715e">// this method will be called on initialisation
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">initialize</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">el</span>) {

        <span style="color:#75715e">// extract the value from el
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// note here our knobInput does not yet exist
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">data</span>(<span style="color:#e6db74">&#34;value&#34;</span>);

        <span style="color:#75715e">// initialize our knob based on the extracted state
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>;

        <span style="color:#75715e">// Initialize knob
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">knob</span>({<span style="color:#a6e22e">draw</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">tron_skin</span>});
    },

    <span style="color:#75715e">// Given the DOM element for the input, return the value
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">getValue</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">el</span>) {
        <span style="color:#66d9ef">return</span> parseFloat(<span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">value</span>);
    },

    <span style="color:#75715e">// Set up the event listeners so that interactions with the
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// input will result in data being sent to server.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// callback is a function that queues data to be sent to
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// the server.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">subscribe</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">el</span>, <span style="color:#a6e22e">callback</span>) {
        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;keyup.knobInputBinding&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
            <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">true</span>);
            <span style="color:#75715e">// When called with true, it will use the rate policy,
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// which in this case is to debounce at 500ms.
</span><span style="color:#75715e"></span>        });

        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">trigger</span>(<span style="color:#e6db74">&#39;configure&#39;</span>, {
            <span style="color:#e6db74">&#39;change&#39;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">v</span>) {
                <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">false</span>);
            },
            <span style="color:#e6db74">&#39;release&#39;</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">v</span>) { 
                <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">false</span>);
            }
        });
        
        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;change.knobInputBinding&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
            <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">false</span>);
            <span style="color:#75715e">// When called with false, it will NOT use the rate policy,
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// so changes will be sent immediately
</span><span style="color:#75715e"></span>        });
    },

    <span style="color:#75715e">// Remove the event listeners
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">unsubscribe</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">el</span>) {
        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">off</span>(<span style="color:#e6db74">&#39;.knobInputBinding&#39;</span>);
    },

    <span style="color:#75715e">// Receive messages from the server.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Messages sent by updateknobInput() are received by this function.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">receiveMessage</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">el</span>, <span style="color:#a6e22e">data</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">hasOwnProperty</span>(<span style="color:#e6db74">&#39;value&#39;</span>)) {
            <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>)
                .<span style="color:#a6e22e">val</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">value</span>)
                .<span style="color:#a6e22e">trigger</span>(<span style="color:#e6db74">&#39;change&#39;</span>);
        }

        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">hasOwnProperty</span>(<span style="color:#e6db74">&#39;readOnly&#39;</span>)) {
            <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">trigger</span>(
                <span style="color:#e6db74">&#39;configure&#39;</span>, {
                    <span style="color:#e6db74">&#34;readOnly&#34;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">readOnly</span>
                }
            );
        }


        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">hasOwnProperty</span>(<span style="color:#e6db74">&#39;label&#39;</span>))
            <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">parent</span>().<span style="color:#a6e22e">parent</span>().<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;label[for=&#34;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">$escapeKnob</span>(<span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">id</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&#34;]&#39;</span>).<span style="color:#a6e22e">text</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">label</span>);

        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">trigger</span>(<span style="color:#e6db74">&#39;change&#39;</span>);
    },

    <span style="color:#75715e">// This returns a full description of the input&#39;s state.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Note that some inputs may be too complex for a full description of the
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// state to be feasible.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">getState</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">el</span>) {
        <span style="color:#66d9ef">return</span> {
            <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">parent</span>().<span style="color:#a6e22e">parent</span>().<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;label[for=&#34;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">$escapeKnob</span>(<span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">id</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&#34;]&#39;</span>).<span style="color:#a6e22e">text</span>(),
            <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">value</span>
        };
    },

    <span style="color:#75715e">// The input rate limiting policy
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">getRatePolicy</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
        <span style="color:#66d9ef">return</span> {
            <span style="color:#75715e">// Can be &#39;debounce&#39; or &#39;throttle&#39;
</span><span style="color:#75715e"></span>            <span style="color:#a6e22e">policy</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;debounce&#39;</span>,
            <span style="color:#a6e22e">delay</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">500</span>
        };
    }

});

<span style="color:#a6e22e">Shiny</span>.<span style="color:#a6e22e">inputBindings</span>.<span style="color:#a6e22e">register</span>(<span style="color:#a6e22e">knobInputBinding</span>, <span style="color:#e6db74">&#39;shiny.knobInput&#39;</span>);
</code></pre></div>

<p>The first part of this binding contain a javascript code when the &ldquo;tron&rdquo; skin is used.
It is just copied and paste from jQuery knob library. Then, we define the input binding as follows:</p>

<ul>
<li>we declare a new variable (not surprisingly &ldquo;knobInputBinding&rdquo;).</li>
<li>we call the <strong>find</strong> method using the class &ldquo;knob-input&rdquo;, previously defined in our
<em>input-knob.R</em> file. Crucial step!</li>
<li>the <strong>initialize</strong> function creates the knob using .knob() (see jQuery knob), where we set the value of the widget.</li>
<li>the method <strong>getValue</strong> returns the value of your widget(s).</li>
<li><strong>subscribe</strong> method: one of the most important feature. Without this part,
the value of your widget will not be updated in shiny when you change it. We can find
several methods inside:</li>
</ul>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;keyup.knobInputBinding&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
            <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">true</span>);
            <span style="color:#75715e">// When called with true, it will use the rate policy,
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// which in this case is to debounce at 500ms.
</span><span style="color:#75715e"></span>        });
</code></pre></div>

<p><strong>keyup</strong> method is related to events on the user keyboard (especially multidirectional arrows).</p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">el</span>).<span style="color:#a6e22e">trigger</span>(<span style="color:#e6db74">&#39;configure&#39;</span>, {
            <span style="color:#e6db74">&#39;change&#39;</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">v</span>) {
                <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">false</span>);
            },
            <span style="color:#e6db74">&#39;release&#39;</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">v</span>) { 
                <span style="color:#a6e22e">callback</span>(<span style="color:#66d9ef">false</span>);
            }
        });
</code></pre></div>
The <strong>configure</strong> method enables to dynamically configure the widget.
The <strong>change</strong> method is used when the value of the input changes. Without <strong>release</strong>,
scrolling with the mouse wheel will not update the value in shiny. We found relevant
to set this kind of behavious.</p>

<p>Besides, the <strong>callback</strong> function is useful to set a rate policy for the widget (see below).</p>

<ul>
<li><strong>getRatePolicy</strong> will avoid to send to much requests to the server. For example,
let&rsquo;s say the user wants to move the knob from 1 to 100. Without rate policy, each change
from 1 to 100 would be sent to the server, which is a bit ridiculous. Rate policy is called
when callback has &ldquo;true&rdquo; as argument.</li>

<li><p>we register the input binding with the <strong>register</strong> function.</p></li>

<li><p>Finally, we create a short demonstration of this widget.</p></li>
</ul>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># knob --------------------------------------------------------------------</span>

<span style="color:#75715e"># Package</span>
<span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;shiny&#34;</span>)

<span style="color:#75715e"># Fun</span>
<span style="color:#a6e22e">source</span>(<span style="color:#e6db74">&#34;input-knob.R&#34;</span>)

<span style="color:#75715e"># HTML dep</span>
shiny<span style="color:#f92672">::</span><span style="color:#a6e22e">addResourcePath</span>(<span style="color:#e6db74">&#39;jquery-knob&#39;</span>, <span style="color:#a6e22e">file.path</span>(<span style="color:#a6e22e">getwd</span>(), <span style="color:#e6db74">&#34;www&#34;</span>))




<span style="color:#75715e"># ui ---- </span>
ui <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">fluidPage</span>(
  tags<span style="color:#f92672">$</span><span style="color:#a6e22e">h1</span>(<span style="color:#e6db74">&#34;knob input examples&#34;</span>), 
  tags<span style="color:#f92672">$</span><span style="color:#a6e22e">h4</span>(<span style="color:#e6db74">&#34;made by Victor Perrier (shinyWidgets) and David Granjon&#34;</span>),
  tags<span style="color:#f92672">$</span><span style="color:#a6e22e">h4</span>(<span style="color:#e6db74">&#34;based on&#34;</span>, <span style="color:#a6e22e">a</span>(<span style="color:#e6db74">&#34;jQuery knob&#34;</span>, href <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://github.com/aterrien/jQuery-Knob&#34;</span>)),
  <span style="color:#a6e22e">br</span>(),
  
  <span style="color:#a6e22e">fluidRow</span>(
    
    <span style="color:#a6e22e">column</span>(
      width <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>,
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob1&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Default:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res1&#34;</span>),
      
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob2&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Color:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, fgColor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#D9534F&#34;</span>, displayInput <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res2&#34;</span>),
      
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob3&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Read only:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">65</span>, readOnly <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res3&#34;</span>)
    ),
    
    <span style="color:#a6e22e">column</span>(
      width <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>,
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob6&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Cursor mode:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>, thickness <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>, cursor <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">150</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">150</span>), <span style="color:#75715e"># must specify width</span>
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res6&#34;</span>),
      
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob7&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Display previous:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>, min <span style="color:#f92672">=</span> <span style="color:#ae81ff">-100</span>, displayPrevious <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, fgColor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#428BCA&#34;</span>, inputColor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#428BCA&#34;</span>),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res7&#34;</span>),
      
      tags<span style="color:#f92672">$</span><span style="color:#a6e22e">div</span>(
        style <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;background-color: #000;&#34;</span>,
        <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob8&#34;</span>, label <span style="color:#f92672">=</span> tags<span style="color:#f92672">$</span><span style="color:#a6e22e">span</span>(<span style="color:#e6db74">&#34;Tron skin:&#34;</span>, style <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;color: #FFF;&#34;</span>), value <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">75</span>, fgColor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#ffec03&#34;</span>, inputColor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#ffec03&#34;</span>, skin <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tron&#34;</span>)
      ),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res8&#34;</span>)
    ),
    
    <span style="color:#a6e22e">column</span>(
      width <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>,
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob11&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Angle offset:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">75</span>, angleOffset <span style="color:#f92672">=</span> <span style="color:#ae81ff">90</span>, lineCap <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;round&#34;</span>),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res11&#34;</span>),
      
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob12&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Angle offset and arc:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>, angleOffset <span style="color:#f92672">=</span> <span style="color:#ae81ff">-125</span>, angleArc <span style="color:#f92672">=</span> <span style="color:#ae81ff">250</span>),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res12&#34;</span>),
      
      <span style="color:#a6e22e">knobInput</span>(inputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;knob13&#34;</span>, label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;4-digit, step 0.1:&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, min <span style="color:#f92672">=</span> <span style="color:#ae81ff">-1000</span>, max <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span>, step <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.1</span>, displayPrevious <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>),
      <span style="color:#a6e22e">verbatimTextOutput</span>(outputId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;res13&#34;</span>)
    )
    
  )
)


<span style="color:#75715e"># server ----</span>
server <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(input, output, session) {

  <span style="color:#a6e22e">lapply</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">13</span>, <span style="color:#a6e22e">function</span>(x) {
    output[<span style="color:#a6e22e">[paste0</span>(<span style="color:#e6db74">&#34;res&#34;</span>, x)]] <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">renderPrint</span>(input[<span style="color:#a6e22e">[paste0</span>(<span style="color:#e6db74">&#34;knob&#34;</span>, x)]])
  })
  
}


<span style="color:#75715e"># app ----</span>
<span style="color:#a6e22e">shinyApp</span>(ui <span style="color:#f92672">=</span> ui, server <span style="color:#f92672">=</span> server)</code></pre></div>

<p>Basically, there are 4 ways you can change the input:</p>

<ul>
<li>using multidirectional arrows</li>
<li>entering text in the input field (when it is present, ie displayInput is set to TRUE)</li>
<li>dragging the knob with the mouse</li>
<li>scrolling with the mouse wheel.</li>
</ul>

<p>For the moment, the readOnly argument does not work with the updateKnobInput function.</p>

</div>


  </main>

  <footer>
  <div>
    &copy; David Granjon 2020
    Â·
    
    
    Â·
    Build with <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://themes.gohugo.io/soho/" target="_blank">Soho</a> theme
    
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  <script src="https://divadnojnarg.github.io/js/custom.js"></script>

  
</body>
</html>
